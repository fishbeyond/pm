<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:int="http://www.springframework.org/schema/integration"
       xmlns:int-http="http://www.springframework.org/schema/integration/http"
       xmlns:int-jdbc="http://www.springframework.org/schema/integration/jdbc"
       xmlns:int-xml="http://www.springframework.org/schema/integration/xml"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                  http://www.springframework.org/schema/beans/spring-beans.xsd
                  http://www.springframework.org/schema/integration
                  http://www.springframework.org/schema/integration/spring-integration.xsd
                  http://www.springframework.org/schema/integration/http
                  http://www.springframework.org/schema/integration/http/spring-integration-http.xsd
                  http://www.springframework.org/schema/integration/jdbc
                  http://www.springframework.org/schema/integration/jdbc/spring-integration-jdbc.xsd
                  http://www.springframework.org/schema/integration/xml http://www.springframework.org/schema/integration/xml/spring-integration-xml.xsd">

    <int:chain input-channel="package.handler">
        <int:service-activator expression="@messageService.receive(payload)"/>
        <int-xml:unmarshalling-transformer unmarshaller="messageMarshaller"/>
        <int:service-activator expression="@messageService.receive(payload)"/>
    </int:chain>

    <bean id="messageMarshaller" parent="mainMarshaller">
        <property name="classesToBeBound" value="com.hs.whocan.domain.project.xml.Message"/>
    </bean>

    <bean id="mainMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller" abstract="true">
        <property name="marshallerProperties">
            <props>
                <prop key="jaxb.formatted.output">#{new java.lang.Boolean(true)}</prop>
                <prop key="jaxb.encoding">utf-8</prop>
                <prop key="jaxb.fragment">#{new java.lang.Boolean(true)}</prop>
            </props>
        </property>
    </bean>
    <!---->



</beans>